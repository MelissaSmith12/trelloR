<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Jakub Chromec" />

<meta name="date" content="2016-07-31" />

<title>R API for Trello</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>



<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23header%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%20code%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />

</head>

<body>




<h1 class="title toc-ignore">R API for Trello</h1>
<h4 class="author"><em>Jakub Chromec</em></h4>
<h4 class="date"><em>2016-07-31</em></h4>



<p>This document explains how to GET public and private data from Trello boards using <code>trellor</code>.</p>
<p>Disclaimer: <code>trellor</code> is not affiliated, associated, authorized, endorsed by or in any way officially connected to Trello, Inc. (www.trello.com).</p>
<div id="getting-public-data" class="section level2">
<h2>Getting public data</h2>
<p><code>trellor</code> allows you to GET data from specific levels of Trello’s JSON hierarchy. Other requests (such as POST or PUT) are not implemented right now. Getting data from private boards requires a secure token, which you can read about in the <strong>Getting private data</strong> section.</p>
<p>In order to get data from a specific endpoint (like “board” or “card”), you need to have either its ID or the ID of its parent structure. Here is an example of getting ID of Trello Development Roadmap (public board) and using it to fetch a list of cards:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">url   =<span class="st"> &quot;https://trello.com/b/nC8QJJoZ/trello-development-roadmap&quot;</span>
bid   =<span class="st"> </span>trellor::<span class="kw">get_id_board</span>(url)
cards =<span class="st"> </span>trellor::<span class="kw">get_board_cards</span>(bid)</code></pre></div>
<p>The incomming JSON data is by default formatted into a <em>flat</em> <code>data.frame</code>, so you don’t have to worry about formatting the response. It will have multiple columns including card ID, name, description and more. Card ID can be used for further queries, such as getting all the members from a particular card:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">card_id =<span class="st"> </span>cards$id[<span class="dv">1</span>]
cards   =<span class="st"> </span>trellor::<span class="kw">get_card_members</span>(card_id)</code></pre></div>
<p>The naming scheme is pretty consistent. The prefix <code>get_</code> is followed by parent level, e.g. <code>board_</code> which is followed by child level, e.g. <code>card</code>. Thus it is easy to guess a function name. For complete list of available functions see <code>?get_board</code> and <code>?get_card</code>.</p>
<div id="get_-function-builder" class="section level3">
<h3><code>get_</code> function builder</h3>
<p>If you lack a particular <code>get_</code> function, you can create one using the function builder <code>trello_req()</code>. Just decide which parent and child levels you want to fetch. Optionally set a filter value. You can then build your own data fetching function like this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">fetch_card_updates =<span class="st"> </span>trellor::<span class="kw">trello_req</span>(<span class="dt">parent =</span> <span class="st">&quot;card&quot;</span>, <span class="dt">child  =</span> <span class="st">&quot;actions&quot;</span>, 
                                         <span class="dt">filter =</span> <span class="st">&quot;updateCard&quot;</span>)</code></pre></div>
<p>Since we want to get data from a card, the <code>&quot;card&quot;</code> is the <code>parent</code>. Card updates are a type of action, so <code>&quot;actions&quot;</code> is the <code>child</code>. Without the <code>filter</code> specification, all the actions would be returned, not only card updates (indeed, that is what the existing <code>get_card_actions()</code> already does).</p>
<p>You can then call your custom function in a usual way, supplying card ID:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">card_updates =<span class="st"> </span><span class="kw">fetch_card_updates</span>(card_id)</code></pre></div>
</div>
<div id="additional-arguments" class="section level3">
<h3>Additional arguments</h3>
<p>The <code>get_</code> functions are designed to eliminate the effort when building and reusing URL requests. Typically, you just specify resource ID in the function call, and that’s it.</p>
<p>However, you have multiple other arguments at your disposal. Let’s look at the function we created in the previous section:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">fetch_card_updates
<span class="co">#&gt; function(id,</span>
<span class="co">#&gt;                           token = NULL,</span>
<span class="co">#&gt;                           # filter = NULL,</span>
<span class="co">#&gt;                           limit = NULL,</span>
<span class="co">#&gt;                           query = NULL,</span>
<span class="co">#&gt;                           paging = FALSE,</span>
<span class="co">#&gt;                           fix = TRUE,</span>
<span class="co">#&gt;                           bind.rows = TRUE) {</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;         # Build url</span>
<span class="co">#&gt;         url = paste0(&quot;https://api.trello.com/1/&quot;, parent, &quot;/&quot;, id, &quot;/&quot;, child)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;         # Send request</span>
<span class="co">#&gt;         res = trello_get(url = url,</span>
<span class="co">#&gt;                          token = token,</span>
<span class="co">#&gt;                          filter = filter,</span>
<span class="co">#&gt;                          limit = limit,</span>
<span class="co">#&gt;                          query = query,</span>
<span class="co">#&gt;                          paging = paging,</span>
<span class="co">#&gt;                          bind.rows = bind.rows)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;         # Assign a class depending on what has been returned</span>
<span class="co">#&gt;         if (is.null(child)) child == parent</span>
<span class="co">#&gt;         class(res) = c(child, &quot;trello_api&quot;, class(res))</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;         # Simplify the response</span>
<span class="co">#&gt;         if (fix) trello_fix(res)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;         # Return result</span>
<span class="co">#&gt;         return(res)</span>
<span class="co">#&gt;     }</span>
<span class="co">#&gt; &lt;environment: 0x394f720&gt;</span></code></pre></div>
<p>As you can see, there is a handful of optional arguments. They’ll be passed to the <code>trello_get()</code> function which is called after the URL is build and handles all the GET requests.</p>
<p>You can supply a</p>
<ul>
<li><code>token</code> (see the Auhtorization section),</li>
<li><code>limit</code> in case you are not happy with the default limit of 1000 results, which is also the maximum value.</li>
<li>You can also specify custom <code>query</code> by providing a list of key-value pairs, such as <code>query = list(key1 = &quot;value1&quot;, key2 = &quot;value2&quot;)</code>. Read <code>?httr::GET</code> for details. Setting <code>filter = &quot;updateCard</code> and <code>limit=10</code> is the equivalent of <code>query = list(filter = &quot;updateCard&quot;, limit = 10)</code>. If you need more info about what keys and values are available for the query prameters, visit the <a href="https://developers.trello.com/advanced-reference">Trello API reference page</a>.</li>
<li>You can also activate <code>paging</code> which is useful for requests returning more than 1000 results. It basically breaks the request down into smaller pieces, each returning no more than 1000 results.</li>
<li><code>bind.rows</code> can be quite useful as it binds all the results into single <code>data.frame</code>. If <code>bind.rows = FALSE</code>, the result will be a <code>list</code> with as many elements as there were pages. This can also come handy on the rare occasion when the responses are not perfectly formatted and make <code>dplyr::bind_rows</code> fail.</li>
</ul>
<p>When calling <code>trello_get()</code> you can also specify <code>filter</code> directly (without the need to set it in the <code>trello_req()</code> call). But you have to specify the whole request URL by hand.</p>
</div>
</div>
<div id="getting-private-data" class="section level2">
<h2>Getting private data</h2>
<p>Access to private boards requires authorization. This process includes creation of an “app” which uses a secure token to communicate with Trello API, and will allow you to retrieve data from private boards (provided you have the right to access them).</p>
<p>To create a token, <strong>login</strong> to Trello and visit the <a href="https://developers.trello.com/get-started/start-building#connect">Developer Start Page</a>. There you can get your developer credentials, i.e. your “key” and “secret”. Then, call the <code>trello_get_token()</code> function to create a token for your project. This will also trigger first-time authorization in the browser (you only have to do it once):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_token =<span class="st"> </span>trellor::<span class="kw">trello_get_token</span>(your_key, your_secret)</code></pre></div>
<p>You will also be offered an option to store the authentication data in your working directory, in a hidden <code>'.httr-oauth'</code> file.</p>
<p><strong>NOTE.</strong> Make sure you keep your credentials in a <strong>safe, non-shared</strong> location.</p>
<div id="using-the-token-to-retrieve-private-data" class="section level3">
<h3>Using the token to retrieve private data</h3>
<p>One thing you can do immediately after obtaining a token is to get an overview of all your boards, by the <code>get_my_boards()</code> function. It accepts the token as its only argument and returns a <code>data.frame</code> with board names and IDs related to the user who authorize the app.</p>
<p>Next, you can just use the <code>get_</code> functions to retrieve data as before, supplying the token as the named argument (<code>token = your_token</code>).</p>
<div id="build-with" class="section level5">
<h5>Build with</h5>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sessionInfo</span>()
<span class="co">#&gt; R version 3.3.1 (2016-06-21)</span>
<span class="co">#&gt; Platform: x86_64-pc-linux-gnu (64-bit)</span>
<span class="co">#&gt; Running under: elementary OS Freya</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; locale:</span>
<span class="co">#&gt;  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              </span>
<span class="co">#&gt;  [3] LC_TIME=cs_CZ.UTF-8        LC_COLLATE=en_US.UTF-8    </span>
<span class="co">#&gt;  [5] LC_MONETARY=cs_CZ.UTF-8    LC_MESSAGES=en_US.UTF-8   </span>
<span class="co">#&gt;  [7] LC_PAPER=cs_CZ.UTF-8       LC_NAME=C                 </span>
<span class="co">#&gt;  [9] LC_ADDRESS=C               LC_TELEPHONE=C            </span>
<span class="co">#&gt; [11] LC_MEASUREMENT=cs_CZ.UTF-8 LC_IDENTIFICATION=C       </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; attached base packages:</span>
<span class="co">#&gt; [1] stats     graphics  grDevices utils     datasets  methods   base     </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; other attached packages:</span>
<span class="co">#&gt; [1] httr_1.2.1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; loaded via a namespace (and not attached):</span>
<span class="co">#&gt;  [1] Rcpp_0.12.4        digest_0.6.9       dplyr_0.5.0       </span>
<span class="co">#&gt;  [4] assertthat_0.1     R6_2.1.2           jsonlite_1.0      </span>
<span class="co">#&gt;  [7] DBI_0.4-1          formatR_1.4        magrittr_1.5      </span>
<span class="co">#&gt; [10] evaluate_0.9       stringi_1.0-1      trellor_0.0.0.9000</span>
<span class="co">#&gt; [13] rmarkdown_0.9.6    tools_3.3.1        stringr_1.0.0     </span>
<span class="co">#&gt; [16] yaml_2.1.13        htmltools_0.3.5    knitr_1.13        </span>
<span class="co">#&gt; [19] tibble_1.0</span></code></pre></div>
</div>
</div>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
